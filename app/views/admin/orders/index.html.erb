<div class="max-w-7xl mx-auto bg-gray-100 shadow-xl rounded-xl overflow-hidden border border-gray-200">
  <%= render 'admin/navigation' %>
  
  <div class="p-6">

  <div class="mb-8">
    <div class="flex mb-4">
      <%= link_to admin_orders_path(status: "pending"), class: "px-5 py-3 rounded-lg shadow #{@active_tab == 'pending' ? 'bg-gradient-to-br from-blue-50 to-indigo-100 text-indigo-900 font-medium border-l-4 border-indigo-600' : 'bg-white text-gray-700 hover:bg-gray-50 border border-gray-200'} flex items-center mr-3 transition-all" do %>
        <span class="flex-1 font-medium">Oczekujące</span>
        <span class="bg-gradient-to-br from-amber-500 to-amber-700 text-white text-xs font-bold rounded-full px-3 py-1 ml-2 shadow"><%= @pending_orders.count %></span>
      <% end %>
      
      <%= link_to admin_orders_path(status: "confirmed"), class: "px-5 py-3 rounded-lg shadow #{@active_tab == 'confirmed' ? 'bg-gradient-to-br from-blue-50 to-indigo-100 text-indigo-900 font-medium border-l-4 border-indigo-600' : 'bg-white text-gray-700 hover:bg-gray-50 border border-gray-200'} flex items-center mr-3 transition-all" do %>
        <span class="flex-1 font-medium">Zatwierdzone</span>
        <span class="bg-gradient-to-br from-green-600 to-green-800 text-white text-xs font-bold rounded-full px-3 py-1 ml-2 shadow"><%= @confirmed_orders.count %></span>
      <% end %>
      
      <%= link_to admin_orders_path(status: "rejected"), class: "px-5 py-3 rounded-lg shadow #{@active_tab == 'rejected' ? 'bg-gradient-to-br from-blue-50 to-indigo-100 text-indigo-900 font-medium border-l-4 border-indigo-600' : 'bg-white text-gray-700 hover:bg-gray-50 border border-gray-200'} flex items-center transition-all" do %>
        <span class="flex-1 font-medium">Odrzucone</span>
        <span class="bg-gradient-to-br from-red-600 to-red-800 text-white text-xs font-bold rounded-full px-3 py-1 ml-2 shadow"><%= @rejected_orders.count %></span>
      <% end %>
    </div>
  </div>

  <div class="tab-content">
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-xl font-bold text-indigo-900">
        <% case @active_tab %>
        <% when "pending" %>
          Zamówienia oczekujące
        <% when "confirmed" %>
          Zamówienia zatwierdzone
        <% when "rejected" %>
          Zamówienia odrzucone
        <% end %>
      </h2>
      <div class="text-sm font-medium px-3 py-1 bg-gradient-to-r from-indigo-100 to-blue-100 text-indigo-800 rounded-full shadow-inner">
        <%= @orders.count %> <%= @orders.count == 1 ? 'zamówienie' : (@orders.count < 5 ? 'zamówienia' : 'zamówień') %>
      </div>
    </div>
    
    <% if @orders.any? %>
      <div class="overflow-x-auto bg-white rounded-xl shadow-lg border border-gray-200">
        <table class="min-w-full divide-y divide-gray-200">
          <thead>
            <tr class="bg-gradient-to-r from-gray-50 to-gray-100">
              <th class="px-6 py-3 text-left text-xs font-semibold text-indigo-900 uppercase tracking-wider">ID</th>
              <th class="px-6 py-3 text-left text-xs font-semibold text-indigo-900 uppercase tracking-wider">Użytkownik</th>
              <th class="px-6 py-3 text-left text-xs font-semibold text-indigo-900 uppercase tracking-wider">Dział</th>
              <th class="px-6 py-3 text-left text-xs font-semibold text-indigo-900 uppercase tracking-wider">
                <% if @active_tab == "pending" %>
                  Data złożenia
                <% else %>
                  Data <%= @active_tab == "confirmed" ? "zatwierdzenia" : "odrzucenia" %>
                <% end %>
              </th>
              <% if @active_tab != "pending" %>
                <th class="px-6 py-3 text-center text-xs font-semibold text-indigo-900 uppercase tracking-wider">
                  <%= @active_tab == "confirmed" ? "Zatwierdzone przez" : "Odrzucone przez" %>
                </th>
              <% else %>
                <th class="px-6 py-3 text-center text-xs font-semibold text-indigo-900 uppercase tracking-wider">Liczba przedmiotów</th>
              <% end %>
              <th class="px-6 py-3 text-right text-xs font-semibold text-indigo-900 uppercase tracking-wider">Akcje</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <% @orders.each do |order| %>
              <tr class="hover:bg-indigo-50 transition-colors">
                <td class="px-6 py-4 whitespace-nowrap text-sm font-semibold text-indigo-900"><%= order.id %></td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
                  <% if order.user.present? %>
                    <%= order.user.name %>
                  <% else %>
                    <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs">Anonimowe</span>
                    <%= order.customer_email %>
                  <% end %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
                  <% if order.user.present? %>
                    <%= order.user.department %>
                  <% else %>
                    <%= order.mpk_number %>
                  <% end %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
                  <% if @active_tab == "pending" %>
                    <%= order.created_at.strftime("%d-%m-%Y %H:%M") %>
                  <% else %>
                    <%= order.confirmed_at&.strftime("%d-%m-%Y %H:%M") || "-" %>
                  <% end %>
                </td>
                <% if @active_tab != "pending" %>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 text-center"><%= order.confirmed_by&.name || "-" %></td>
                <% else %>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 text-center"><%= order.order_items.sum(:quantity) %></td>
                <% end %>
                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                  <%= link_to "Szczegóły", admin_order_path(order), class: "bg-gradient-to-r from-indigo-600 to-indigo-800 hover:from-indigo-700 hover:to-indigo-900 text-white py-1 px-4 rounded-lg shadow mr-1" %>
                  <% if @active_tab == "pending" %>
                    <%= button_to "Zatwierdź", confirm_admin_order_path(order), method: :patch, class: "bg-gradient-to-r from-green-600 to-green-800 hover:from-green-700 hover:to-green-900 text-white py-1 px-4 rounded-lg shadow mr-1 inline-block" %>
                    <%= button_to "Odrzuć", reject_admin_order_path(order), method: :patch, class: "bg-gradient-to-r from-red-600 to-red-800 hover:from-red-700 hover:to-red-900 text-white py-1 px-4 rounded-lg shadow inline-block" %>
                  <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    <% else %>
      <div class="bg-gradient-to-r from-indigo-50 to-blue-50 p-8 rounded-xl border border-indigo-100 flex items-center shadow-lg">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-indigo-400 mr-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <div>
          <h3 class="text-xl font-bold text-indigo-900 mb-2">Brak danych</h3>
          <p class="text-indigo-700 text-lg">
            <% case @active_tab %>
            <% when "pending" %>
              Aktualnie nie ma żadnych zamówień oczekujących.
            <% when "confirmed" %>
              Aktualnie nie ma żadnych zatwierdzonych zamówień.
            <% when "rejected" %>
              Aktualnie nie ma żadnych odrzuconych zamówień.
            <% end %>
          </p>
        </div>
      </div>
    <% end %>
  </div>
</div>

